# Screen Helper (Linux | Wayland | KDE)

Ця програма — це розумний помічник, який автоматично розпізнає текст з екрану при натисканні правої кнопки миші, знаходить відповідь на тестове запитання за допомогою штучного інтелекту та виводить її у маленькому вікні поверх усіх програм.

## Як це працює

1.  **Запуск**: Ви запускаєте програму через `start.sh`.
2.  **Активація**: Програма працює у фоні та слухає натискання **правої кнопки миші**.
3.  **Скріншот**: При кліку робиться миттєвий знімок екрану (використовуючи `grim` або `spectacle`).
4.  **Розпізнавання (OCR)**: Зображення відправляється моделі `mistralai/ministral-14b-2512`, яка витягує текст запитання та варіанти відповідей.
5.  **Пошук відповіді**: Текст передається найшвидшій моделі `mistralai/mistral-large-2512`, яка знаходить правильну відповідь.
6.  **Результат**: Відповідь з'являється у маленькому напівпрозорому вікні в нижньому правому куті екрану.
    *   Вікно залишається **поверх усіх**, поки ви не клікнете на іншу програму.
    *   Вікно не відображається в панелі задач.

## Встановлення

### 1. Системні вимоги (Arch Linux / KDE Wayland)
Встановіть необхідні системні пакети:
```bash
sudo pacman -S grim python-pip python-pyqt6
```
*   `grim`: Для створення скріншотів на Wayland.
*   `spectacle`: Альтернативний інструмент (якщо grim не працює).

### 2. Python бібліотеки
Встановіть залежності у віртуальне середовище:
```bash
python -m venv .venv
source .venv/bin/activate.fish  # або .venv/bin/activate для bash
pip install -r requirements.txt
```

### 3. Налаштування API
Створіть файл `.env` (якщо немає) та додайте ваш ключ OpenRouter:
```bash
OPENROUTER_API_KEY=sk-or-v1-ваш-ключ-тут
```

## Запуск

Для коректної роботи перехоплення миші на Wayland програмі потрібні права `root` (або доступ до `/dev/input`).

### Спосіб 1: Через скрипт (Рекомендовано)
Просто запустіть файл `start.sh` (можна подвійним кліком):
```bash
./start.sh
```
Введіть ваш пароль у графічному вікні. Програма запуститься у фоні.

### Спосіб 2: Через термінал
```bash
sudo .venv/bin/python main.py
```

## Вирішення проблем

*   **Не працює правий клік**: Переконайтеся, що ви запустили програму через `start.sh` або з `sudo`. Wayland блокує глобальне перехоплення клавіш для звичайних програм.
*   **Немає скріншоту**: Перевірте, чи встановлено `grim`. Спробуйте зробити скріншот вручну в терміналі командою `grim test.png`.
*   **Вікно не з'являється**: Вікно з'явиться **тільки** після того, як AI знайде відповідь. Якщо помилка в API ключі або інтернеті, відповідь може не прийти. Перевірте вивід у терміналі (якщо запускали вручну).

## Структура проекту
*   `main.py`: Головна логіка.
*   `listener.py`: Перехоплення подій миші (використовує `evdev`).
*   `screen.py`: Створення скріншотів.
*   `ai.py`: Взаємодія з OpenRouter API.
*   `ui.py`: Інтерфейс вікна з відповіддю.
